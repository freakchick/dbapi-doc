<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DBApiæ’ä»¶å¼€å‘æŒ‡å— | DBAPI</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script>
          var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?a8fb326da5bdf70aa80eb56b11f97e0f";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
          })();
                
          </script>
    <meta name="description" content="Vue-powered Static Site Generator">
    
    <link rel="preload" href="/assets/css/0.styles.7be31436.css" as="style"><link rel="preload" href="/assets/js/app.5d88dc79.js" as="script"><link rel="preload" href="/assets/js/3.91e00d9f.js" as="script"><link rel="preload" href="/assets/js/11.f19c60e4.js" as="script"><link rel="prefetch" href="/assets/js/10.60af250e.js"><link rel="prefetch" href="/assets/js/12.883416c4.js"><link rel="prefetch" href="/assets/js/13.c92fe683.js"><link rel="prefetch" href="/assets/js/14.6f481334.js"><link rel="prefetch" href="/assets/js/15.538c5c8c.js"><link rel="prefetch" href="/assets/js/16.44b53986.js"><link rel="prefetch" href="/assets/js/4.7432690a.js"><link rel="prefetch" href="/assets/js/5.7487c1a0.js"><link rel="prefetch" href="/assets/js/6.ac85b528.js"><link rel="prefetch" href="/assets/js/7.3e46598f.js"><link rel="prefetch" href="/assets/js/8.c9600528.js"><link rel="prefetch" href="/assets/js/9.ee2a264a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5f89cefe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.7be31436.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DBAPI</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/install/" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="/plugin/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Plugin
</a></div><div class="nav-item"><a href="/donate/" class="nav-link">
  ğŸ’–Sponsor
</a></div><div class="nav-item"><a href="https://gitee.com/freakchicken/db-api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/freakchick/DBApi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugin/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/plugin/" class="nav-link">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/guide/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="/install/" class="nav-link">
  Install
</a></div><div class="nav-item"><a href="/plugin/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Plugin
</a></div><div class="nav-item"><a href="/donate/" class="nav-link">
  ğŸ’–Sponsor
</a></div><div class="nav-item"><a href="https://gitee.com/freakchicken/db-api" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Gitee
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/freakchick/DBApi" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Select language" class="dropdown-title"><span class="title">Languages</span> <span class="arrow down"></span></button> <button type="button" aria-label="Select language" class="mobile-dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/plugin/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/zh/plugin/" class="nav-link">
  ç®€ä½“ä¸­æ–‡
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DBApiæ’ä»¶å¼€å‘æŒ‡å—</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/plugin/#_1-æ’ä»¶çš„ä½œç”¨" class="sidebar-link">1.æ’ä»¶çš„ä½œç”¨</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/plugin/#_1-1-æ•°æ®è½¬æ¢æ’ä»¶" class="sidebar-link">1.1 æ•°æ®è½¬æ¢æ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/plugin/#_1-2-ç¼“å­˜æ’ä»¶" class="sidebar-link">1.2 ç¼“å­˜æ’ä»¶</a></li><li class="sidebar-sub-header"><a href="/plugin/#_1-3-å‘Šè­¦æ’ä»¶" class="sidebar-link">1.3 å‘Šè­¦æ’ä»¶</a></li></ul></li><li><a href="/plugin/#_2-æ’ä»¶çš„å¼€å‘æµç¨‹" class="sidebar-link">2.æ’ä»¶çš„å¼€å‘æµç¨‹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/plugin/#_2-1-å‡†å¤‡å·¥ä½œ" class="sidebar-link">2.1 å‡†å¤‡å·¥ä½œ</a></li><li class="sidebar-sub-header"><a href="/plugin/#_2-2æ’ä»¶å¼€å‘" class="sidebar-link">2.2æ’ä»¶å¼€å‘</a></li><li class="sidebar-sub-header"><a href="/plugin/#_2-3-æ’ä»¶æ³¨å†Œ" class="sidebar-link">2.3 æ’ä»¶æ³¨å†Œ</a></li><li class="sidebar-sub-header"><a href="/plugin/#_2-4-æ’ä»¶è¯´æ˜" class="sidebar-link">2.4 æ’ä»¶è¯´æ˜</a></li><li class="sidebar-sub-header"><a href="/plugin/#_2-5-æ’ä»¶ä½¿ç”¨" class="sidebar-link">2.5 æ’ä»¶ä½¿ç”¨</a></li></ul></li><li><a href="/plugin/#_3-æ’ä»¶å¼€å‘å®Œæ•´æ¡ˆä¾‹" class="sidebar-link">3.æ’ä»¶å¼€å‘å®Œæ•´æ¡ˆä¾‹</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dbapiæ’ä»¶å¼€å‘æŒ‡å—"><a href="#dbapiæ’ä»¶å¼€å‘æŒ‡å—" class="header-anchor">#</a> DBApiæ’ä»¶å¼€å‘æŒ‡å—</h1> <h2 id="_1-æ’ä»¶çš„ä½œç”¨"><a href="#_1-æ’ä»¶çš„ä½œç”¨" class="header-anchor">#</a> 1.æ’ä»¶çš„ä½œç”¨</h2> <ul><li>DBApiçš„æ’ä»¶åˆ†3ç±»ï¼Œåˆ†åˆ«æ˜¯æ•°æ®è½¬æ¢æ’ä»¶ã€ç¼“å­˜æ’ä»¶ã€å‘Šè­¦æ’ä»¶</li></ul> <h3 id="_1-1-æ•°æ®è½¬æ¢æ’ä»¶"><a href="#_1-1-æ•°æ®è½¬æ¢æ’ä»¶" class="header-anchor">#</a> 1.1 æ•°æ®è½¬æ¢æ’ä»¶</h3> <ul><li>æœ‰æ—¶å€™sqlæ— æ³•ä¸€æ¬¡æ€§è·å¾—è‡ªå·±æƒ³è¦çš„æ•°æ®æ ¼å¼ï¼Œå¦‚æœç”¨ä»£ç å¯¹æ•°æ®è¿›è¡Œä¸€äº›å¤„ç†è½¬æ¢èƒ½æ›´åŠ æ–¹ä¾¿ï¼Œè¿™æ—¶å€™å°±è¦ç”¨åˆ°æ•°æ®è½¬æ¢æ’ä»¶ã€‚ç”¨æˆ·è‡ªå·±ç¼–å†™æ•°æ®è½¬æ¢é€»è¾‘çš„ä»£ç ã€‚</li> <li>æ¯”å¦‚é’ˆå¯¹sqlæŸ¥è¯¢ç»“æœä¸­çš„ç”¨æˆ·æ‰‹æœºå·ã€é“¶è¡Œå¡å·è¿›è¡Œè½¬æ¢è„±æ•ã€‚</li> <li><strong>å¦‚æœä¸€ä¸ªAPIå†…åŒ…å«å¤šæ¡sqlï¼Œé‚£ä¹ˆæ¯æ¡sqlä¼šå¯¹åº”ä¸€ä¸ªæ•°æ®è½¬æ¢æ’ä»¶é…ç½®ï¼Œæ•°æ®è½¬æ¢æ’ä»¶æ°¸è¿œæ˜¯é’ˆå¯¹å•æ¡sqlæŸ¥è¯¢ç»“æœè¿›è¡Œè½¬æ¢</strong></li></ul> <h3 id="_1-2-ç¼“å­˜æ’ä»¶"><a href="#_1-2-ç¼“å­˜æ’ä»¶" class="header-anchor">#</a> 1.2 ç¼“å­˜æ’ä»¶</h3> <ul><li>ä¸»è¦æ˜¯å¯¹æŸ¥è¯¢ç±»APIï¼ŒsqlæŸ¥è¯¢ç»“æœè¿›è¡Œç¼“å­˜ï¼Œè¿™æ ·é¿å…é¢‘ç¹çš„æŸ¥è¯¢æ•°æ®åº“ï¼Œå¯¹æ•°æ®åº“é€ æˆå‹åŠ›ã€‚</li> <li>ç¼“å­˜é€»è¾‘ç”±ç”¨æˆ·è‡ªå·±ç¼–å†™ï¼Œç”¨æˆ·å¯ä»¥ç¼“å­˜åˆ°redis/mongodb/elasticsearchç­‰ç­‰ã€‚</li> <li>å½“ä»ç¼“å­˜ä¸­æŸ¥è¯¢ä¸åˆ°æ•°æ®æ—¶ï¼Œæ‰å»æ•°æ®åº“æŸ¥è¯¢ï¼ŒåŒæ—¶å°†ç»“æœç¼“å­˜ä¸‹æ¥ã€‚</li> <li><strong>å¦‚æœä¸€ä¸ªAPIå†…åŒ…å«å¤šæ¡sqlï¼Œé‚£ä¹ˆç¼“å­˜æ’ä»¶æ˜¯å¯¹å¤šæ¡sqlæ‰§è¡Œçš„ç»“æœï¼ˆ<small><em>å¦‚æœå•æ¡sqlé…ç½®äº†è½¬æ¢æ’ä»¶ï¼Œä¼šå…ˆè½¬æ¢ç»“æœ</em></small>ï¼‰å°è£…æˆä¸€ä¸ªæ•´ä½“åï¼Œå¯¹æ•´ä½“è¿›è¡Œç¼“å­˜</strong></li></ul> <h3 id="_1-3-å‘Šè­¦æ’ä»¶"><a href="#_1-3-å‘Šè­¦æ’ä»¶" class="header-anchor">#</a> 1.3 å‘Šè­¦æ’ä»¶</h3> <ul><li>å½“APIå†…éƒ¨æŠ¥é”™çš„æ—¶å€™ï¼Œå‘Šè­¦æ’ä»¶å¯ä»¥å°†æŠ¥é”™ä¿¡æ¯å‘é€å‘Šè­¦æé†’ï¼Œæ¯”å¦‚å‘é‚®ä»¶ã€å‘çŸ­ä¿¡</li> <li>å‘Šè­¦é€»è¾‘ç”±ç”¨æˆ·è‡ªå·±ç¼–å†™</li></ul> <blockquote><p>æ³¨æ„ç³»ç»Ÿå·²ç»è‡ªå¸¦é‚®ä»¶å‘Šè­¦æ’ä»¶ï¼Œå¦‚æœè¦ä½¿ç”¨æ³¨æ„ä¿®æ”¹<code>plugin.properties</code>ä¸­å‘ä»¶äººå‚æ•°ä¿¡æ¯</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code># é‚®ä»¶å‘Šè­¦æ’ä»¶å…¨å±€å‚æ•°
EMAIL_USERNAME=dbapi_test@163.com
EMAIL_PASSWORD=WGJQBFRIPUENHMUP
EMAIL_HOST=smtp.163.com
</code></pre></div><h2 id="_2-æ’ä»¶çš„å¼€å‘æµç¨‹"><a href="#_2-æ’ä»¶çš„å¼€å‘æµç¨‹" class="header-anchor">#</a> 2.æ’ä»¶çš„å¼€å‘æµç¨‹</h2> <h3 id="_2-1-å‡†å¤‡å·¥ä½œ"><a href="#_2-1-å‡†å¤‡å·¥ä½œ" class="header-anchor">#</a> 2.1 å‡†å¤‡å·¥ä½œ</h3> <blockquote><p>æ’ä»¶ä½¿ç”¨javaè¯­è¨€ç¼–å†™ï¼Œå‡†å¤‡java(8+)å¼€å‘ç¯å¢ƒ æ–°å»ºmavené¡¹ç›®ï¼Œpomé‡Œå¼•å…¥<code>dbapi-plugin</code></p></blockquote> <div class="language-xml extra-class"><pre class="language-xml"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.gitee.freakchicken.dbapi<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dbapi-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>provided<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>æ³¨æ„ä¸åŒç‰ˆæœ¬çš„DBApiä½¿ç”¨çš„æ’ä»¶å¿…é¡»ä¾èµ–ç›¸åº”ç‰ˆæœ¬çš„dbapi-plugin.jarï¼Œç‰ˆæœ¬å¯¹åº”å…³ç³»å¦‚ä¸‹</p></blockquote> <table><thead><tr><th>DBApiç‰ˆæœ¬</th> <th>dbapi-pluginç‰ˆæœ¬</th></tr></thead> <tbody><tr><td>2.3.1</td> <td>2.3.1</td></tr> <tr><td>2.3.2</td> <td>2.3.2</td></tr> <tr><td>3.0.0</td> <td>3.0.0</td></tr> <tr><td>3.1.1 - 3.1.2</td> <td>3.1.1</td></tr></tbody></table> <h3 id="_2-2æ’ä»¶å¼€å‘"><a href="#_2-2æ’ä»¶å¼€å‘" class="header-anchor">#</a> 2.2æ’ä»¶å¼€å‘</h3> <h4 id="_2-2-1-ç¼“å­˜æ’ä»¶å¼€å‘"><a href="#_2-2-1-ç¼“å­˜æ’ä»¶å¼€å‘" class="header-anchor">#</a> 2.2.1 ç¼“å­˜æ’ä»¶å¼€å‘</h4> <blockquote><p>æ–°å»ºjavaç±»å®ç°<code>com.gitee.freakchicken.dbapi.plugin.CachePlugin</code></p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">ApiConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span></span><span class="token class-name">CachePlugin</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Cdemo</span> <span class="token keyword">extends</span> <span class="token class-name">CachePlugin</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * æ’ä»¶åç§°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶åŠŸèƒ½æè¿°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶å‚æ•°æè¿°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getParamDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶åˆå§‹åŒ–æ–¹æ³•ï¼Œå®ä¾‹åŒ–æ’ä»¶çš„æ—¶å€™æ‰§è¡Œï¼Œæ°¸è¿œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ
     * ä¸€èˆ¬æ˜¯ç”¨æ¥åˆ›å»ºè¿æ¥æ± 
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * ç¼“å­˜è®¾ç½®
     *
     * @param config apié…ç½®
     * @param requestParams requestå‚æ•°
     * @param data   è¦ç¼“å­˜çš„æ•°æ®
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">ApiConfig</span> config<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> requestParams<span class="token punctuation">,</span> <span class="token class-name">Object</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ¸…é™¤æ‰€æœ‰ç¼“å­˜ï¼ŒAPIä¿®æ”¹ã€åˆ é™¤ã€ä¸‹çº¿çš„æ—¶å€™ä¼šè§¦å‘æ¸…é™¤ç¼“å­˜
     *
     * @param config apié…ç½®
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">clean</span><span class="token punctuation">(</span><span class="token class-name">ApiConfig</span> config<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æŸ¥è¯¢ç¼“å­˜
     *
     * @param config apié…ç½®
     * @param requestParams requestå‚æ•°
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">ApiConfig</span> config<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> requestParams<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><blockquote><p><code>init</code>æ–¹æ³•æ˜¯æ’ä»¶åˆå§‹åŒ–æ–¹æ³•ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œä¸€èˆ¬ç”¨æ¥åˆå§‹åŒ–è¿æ¥æ± ï¼Œæ¯”å¦‚åˆå§‹åŒ–redisè¿æ¥æ± </p> <p><code>get</code>æ–¹æ³•æ˜¯è·å–ç¼“å­˜ä¸­çš„æ•°æ®çš„æ–¹æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯apié…ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„å‚æ•°</p> <p><code>set</code>æ–¹æ³•æ˜¯è®¾ç½®ç¼“å­˜çš„æ–¹æ³•ï¼Œå½“æ‰§è¡ŒsqlæŸ¥è¯¢ç»“æœåï¼Œä¼šè°ƒç”¨setæ–¹æ³•ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯apié…ç½®ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¯·æ±‚çš„å‚æ•°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯sqlæŸ¥è¯¢ç»“æœï¼Œå¦‚æœapié…ç½®äº†æ•°æ®è½¬æ¢æ’ä»¶çš„è¯ï¼Œå°±æ˜¯è½¬æ¢åçš„ç»“æœ</p> <p><code>clean</code>æ˜¯æ¸…ç©ºç¼“å­˜çš„æ–¹æ³•ï¼Œå½“APIçš„ä¿®æ”¹ã€ä¸‹çº¿ã€åˆ é™¤çš„æ—¶å€™ï¼Œä¼šæ‰§è¡Œè¿™ä¸ª<code>clean</code>æ–¹æ³•</p></blockquote> <h4 id="_2-2-2-æ•°æ®è½¬æ¢æ’ä»¶å¼€å‘"><a href="#_2-2-2-æ•°æ®è½¬æ¢æ’ä»¶å¼€å‘" class="header-anchor">#</a> 2.2.2 æ•°æ®è½¬æ¢æ’ä»¶å¼€å‘</h4> <blockquote><p>æ–°å»ºjavaç±»ï¼Œå®ç°<code>com.gitee.freakchicken.dbapi.plugin.TransformPlugin</code></p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>alibaba<span class="token punctuation">.</span>fastjson<span class="token punctuation">.</span></span><span class="token class-name">JSONObject</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">ApiConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span></span><span class="token class-name">TransformPlugin</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tdemo</span> <span class="token keyword">extends</span> <span class="token class-name">TransformPlugin</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * æ’ä»¶åç§°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶åŠŸèƒ½æè¿°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶å‚æ•°æè¿°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getParamDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶åˆå§‹åŒ–æ–¹æ³•ï¼Œå®ä¾‹åŒ–æ’ä»¶çš„æ—¶å€™æ‰§è¡Œï¼Œæ°¸è¿œåªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œ
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ•°æ®è½¬æ¢é€»è¾‘
     * @param data sqlæŸ¥è¯¢ç»“æœ
     * @param params ç¼“å­˜æ’ä»¶å±€éƒ¨å‚æ•°
     * @return
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Object</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JSONObject</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span> <span class="token class-name">String</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>æ•°æ®è½¬æ¢é€»è¾‘å†™åœ¨<code>transform</code>æ–¹æ³•é‡Œï¼Œç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯sqlæŸ¥è¯¢ç»“æœï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ’ä»¶å±€éƒ¨å‚æ•°</p></blockquote> <h4 id="_2-2-3-å‘Šè­¦æ’ä»¶å¼€å‘"><a href="#_2-2-3-å‘Šè­¦æ’ä»¶å¼€å‘" class="header-anchor">#</a> 2.2.3 å‘Šè­¦æ’ä»¶å¼€å‘</h4> <blockquote><p>æ–°å»ºjavaç±»ï¼Œå®ç°<code>com.gitee.freakchicken.dbapi.plugin.AlarmPlugin</code></p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">ApiConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span></span><span class="token class-name">AlarmPlugin</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">HttpServletRequest</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">EmailAlarmPlugin</span> <span class="token keyword">extends</span> <span class="token class-name">AlarmPlugin</span> <span class="token punctuation">{</span>
    <span class="token comment">/**
     * æ’ä»¶åˆå§‹åŒ–æ–¹æ³•ï¼Œå®ä¾‹åŒ–æ’ä»¶çš„æ—¶å€™æ‰§è¡Œï¼Œæ°¸è¿œåªä¼šæ‰§è¡Œä¸€æ¬¡
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * å‘Šè­¦é€»è¾‘
     *
     * @param e           å¼‚å¸¸
     * @param config      APIå…ƒæ•°æ®
     * @param request     è¯·æ±‚
     * @param pluginParam å‘Šè­¦æ’ä»¶å±€éƒ¨å‚æ•°
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">alarm</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">ApiConfig</span> config<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">String</span> pluginParam<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶åç§°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶åŠŸèƒ½æè¿°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * æ’ä»¶å‚æ•°æè¿°ï¼Œç”¨äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæç¤ºç”¨æˆ·
     *
     * @return
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getParamDescription</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h3 id="_2-3-æ’ä»¶æ³¨å†Œ"><a href="#_2-3-æ’ä»¶æ³¨å†Œ" class="header-anchor">#</a> 2.3 æ’ä»¶æ³¨å†Œ</h3> <blockquote><p>dbapiæ’ä»¶ä½¿ç”¨javaçš„spiæœºåˆ¶æ³¨å†Œï¼Œéœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</p></blockquote> <blockquote><p>åœ¨<code>resources</code>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶å¤¹<code>META-INF</code>,å†åœ¨<code>META-INF</code>æ–‡ä»¶å¤¹ä¸‹æ–°å»º<code>services</code>æ–‡ä»¶å¤¹</p> <p>åœ¨<code>META-INF/services</code>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶<code>com.gitee.freakchicken.dbapi.plugin.CachePlugin</code>ï¼Œå¹¶åœ¨æ­¤æ–‡ä»¶ä¸­å¡«å†™åˆšæ‰ç¼–å†™çš„ç¼“å­˜æ’ä»¶çš„javaç±»å</p> <p>åœ¨<code>META-INF/services</code>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶<code>com.gitee.freakchicken.dbapi.plugin.TransformPlugin</code>ï¼Œå¹¶åœ¨æ­¤æ–‡ä»¶ä¸­å¡«å†™åˆšæ‰ç¼–å†™çš„æ•°æ®è½¬æ¢æ’ä»¶çš„javaç±»å</p> <p>åœ¨<code>META-INF/services</code>ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶<code>com.gitee.freakchicken.dbapi.plugin.AlarmPlugin</code>ï¼Œå¹¶åœ¨æ­¤æ–‡ä»¶ä¸­å¡«å†™åˆšæ‰ç¼–å†™çš„å‘Šè­¦æ’ä»¶çš„javaç±»å</p></blockquote> <h3 id="_2-4-æ’ä»¶è¯´æ˜"><a href="#_2-4-æ’ä»¶è¯´æ˜" class="header-anchor">#</a> 2.4 æ’ä»¶è¯´æ˜</h3> <h4 id="_2-4-1-å…¨å±€å‚æ•°"><a href="#_2-4-1-å…¨å±€å‚æ•°" class="header-anchor">#</a> 2.4.1 å…¨å±€å‚æ•°</h4> <ul><li><strong>è®¾è®¡æ’ä»¶å…¨å±€å‚æ•°çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä¸€ä¸ªæ’ä»¶åœ¨ä¸åŒçš„ç¯å¢ƒä¸­ä½¿ç”¨</strong></li> <li>æ’ä»¶å…¨å±€å‚æ•°æ˜¯æ¯ä¸ªæ’ä»¶è‡ªèº«çš„å‚æ•°ï¼Œä¸APIæ— å…³ï¼Œæ¯”å¦‚ç¼“å­˜æ’ä»¶éœ€è¦è¿æ¥çš„redisçš„ipã€ç«¯å£ä¿¡æ¯ã€‚é…ç½®åœ¨æ–‡ä»¶<code>conf/plugin.properties</code>ä¸­ã€‚</li> <li>å…¨å±€å‚æ•°ä¸»è¦æ˜¯ä¸ºäº†æ–¹ä¾¿ä¸åŒç¯å¢ƒçš„åˆ‡æ¢ï¼Œæ¯”å¦‚æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒéœ€è¦è¿æ¥ä¸åŒçš„redisåœ°å€ï¼Œé‚£ä¹ˆæŠŠredisåœ°å€ä¿¡æ¯é…åœ¨é…ç½®æ–‡ä»¶å°±å¾ˆæ–¹ä¾¿ã€‚</li> <li>å¦‚æœç”¨æˆ·æƒ³æ·»åŠ æ’ä»¶çš„å…¨å±€é…ç½®ï¼Œå¯ä»¥ç›´æ¥åœ¨<code>plugin.properties</code>æ–‡ä»¶ä¸­æ·»åŠ é…ç½®ï¼Œæ¯”å¦‚ï¼š</li></ul> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">RedisCachePlugin.ip</span><span class="token punctuation">=</span><span class="token value attr-value">127.0.0.1</span>
<span class="token key attr-name">RedisCachePlugin.port</span><span class="token punctuation">=</span><span class="token value attr-value">6379</span>
<span class="token key attr-name">RedisCachePlugin.db</span><span class="token punctuation">=</span><span class="token value attr-value">0</span>
<span class="token key attr-name">RedisCachePlugin.password</span><span class="token punctuation">=</span>
</code></pre></div><ul><li>ä»£ç è·å–æ’ä»¶å…¨å±€å‚æ•°å€¼çš„æ–¹æ³•ï¼š</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>plugin<span class="token punctuation">.</span></span><span class="token class-name">PluginConf</span></span><span class="token punctuation">;</span>
<span class="token class-name">String</span> ip<span class="token operator">=</span><span class="token class-name">PluginConf</span><span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token string">&quot;RedisCachePlugin.ip&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-4-2-å±€éƒ¨å‚æ•°"><a href="#_2-4-2-å±€éƒ¨å‚æ•°" class="header-anchor">#</a> 2.4.2 å±€éƒ¨å‚æ•°</h4> <ul><li><p><strong>è®¾è®¡æ’ä»¶å±€éƒ¨å‚æ•°çš„ç›®çš„ï¼Œæ˜¯ä¸ºäº†è®©ä¸€ä¸ªæ’ä»¶èƒ½å¤Ÿè¢«å¤šä¸ªAPIçµæ´»çš„å¤ç”¨</strong></p></li> <li><p>æ’ä»¶å±€éƒ¨å‚æ•°æ˜¯ä¸ºæ¯ä¸ªAPIå•ç‹¬æŒ‡å®šçš„å‚æ•°ï¼Œå‚æ•°å€¼ä»é¡µé¢ä¸Šé…ç½®è¿›å»ï¼ˆåˆ›å»ºã€ç¼–è¾‘APIçš„æ—¶å€™ï¼‰ã€‚</p></li> <li><p>æ¯”å¦‚é’ˆå¯¹redisç¼“å­˜æ’ä»¶ï¼Œä¸åŒçš„APIéœ€è¦è®¾ç½®ä¸åŒçš„ç¼“å­˜æ—¶é—´ï¼Œ é‚£ä¹ˆæ¯ä¸ªAPIè°ƒç”¨åŒä¸€ä¸ªç¼“å­˜æ’ä»¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¼ é€’ä¸åŒçš„æ—¶é—´å‚æ•°è¿›å»ã€‚
åˆæ¯”å¦‚é’ˆå¯¹å­—æ®µåŠ å¯†æ’ä»¶ï¼Œæ¯ä¸ªAPIéœ€è¦åŠ å¯†çš„å­—æ®µéƒ½ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆæ¯ä¸ªAPIè°ƒç”¨åŒä¸€ä¸ªå­—æ®µåŠ å¯†æ’ä»¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥ä¼ é€’ä¸åŒçš„å­—æ®µåå‚æ•°è¿›å»ã€‚ è¿™æ ·å¯ä»¥è®©ä¸€ä¸ªæ’ä»¶çµæ´»çš„è¢«å¤šä¸ªAPIå¤ç”¨ã€‚</p></li> <li><p>ä»£ç è·å–æ’ä»¶å±€éƒ¨å‚æ•°å€¼çš„æ–¹æ³•ï¼š</p></li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gitee<span class="token punctuation">.</span>freakchicken<span class="token punctuation">.</span>dbapi<span class="token punctuation">.</span>common<span class="token punctuation">.</span></span><span class="token class-name">ApiConfig</span></span><span class="token punctuation">;</span>

<span class="token comment">// ç¼“å­˜æ’ä»¶è·å–å±€éƒ¨å‚æ•°ï¼Œä»ApiConfigè·å–</span>
<span class="token class-name">String</span> params<span class="token operator">=</span><span class="token class-name">ApiConfig</span><span class="token punctuation">.</span><span class="token function">getCachePluginParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// æ•°æ®è½¬æ¢æ’ä»¶è·å–å±€éƒ¨å‚æ•°ï¼Œç›´æ¥å°±æ˜¯transformæ–¹æ³•çš„paramså‚æ•°</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token class-name">Object</span> <span class="token function">transform</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">JSONObject</span><span class="token punctuation">&gt;</span></span> data<span class="token punctuation">,</span><span class="token class-name">String</span> params<span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token comment">// å‘Šè­¦æ’ä»¶è·å–å±€éƒ¨å‚æ•°ï¼Œç›´æ¥å°±æ˜¯alarmæ–¹æ³•çš„pluginParamå‚æ•°</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">alarm</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">,</span> <span class="token class-name">ApiConfig</span> config<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">String</span> pluginParam<span class="token punctuation">)</span>
</code></pre></div><p><img src="https://freakchicken.gitee.io/images/dbApi/20220503/api_edit2.png" alt=""></p> <h4 id="_2-4-3-æ’ä»¶æ—¥å¿—æ‰“å°"><a href="#_2-4-3-æ’ä»¶æ—¥å¿—æ‰“å°" class="header-anchor">#</a> 2.4.3 æ’ä»¶æ—¥å¿—æ‰“å°</h4> <blockquote><p>å¦‚æœæƒ³åœ¨æ’ä»¶å†…æ‰“å°æ—¥å¿—ï¼Œæ¨èç›´æ¥è°ƒç”¨çˆ¶ç±»çš„<code>logger</code></p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">super</span><span class="token punctuation">.</span>logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;set data to cache&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_2-4-4-æ’ä»¶æè¿°è¯´æ˜"><a href="#_2-4-4-æ’ä»¶æè¿°è¯´æ˜" class="header-anchor">#</a> 2.4.4 æ’ä»¶æè¿°è¯´æ˜</h4> <ul><li>æ‰€æœ‰çš„æ’ä»¶éƒ½è¦å®ç°<code>getName</code> <code>getDescription</code> <code>getParamDescription</code>3ä¸ªæ–¹æ³•ï¼Œ
å…¶ä½œç”¨æ˜¯ä¸ºäº†åœ¨é¡µé¢ä¸Šæç¤ºç”¨æˆ·æ’ä»¶çš„ä½œç”¨å’Œæ’ä»¶å‚æ•°çš„æ ¼å¼</li></ul> <p><img src="https://freakchicken.gitee.io/images/dbApi/20220503/plugin_desc.png" alt=""></p> <h3 id="_2-5-æ’ä»¶ä½¿ç”¨"><a href="#_2-5-æ’ä»¶ä½¿ç”¨" class="header-anchor">#</a> 2.5 æ’ä»¶ä½¿ç”¨</h3> <ul><li>ç”¨æˆ·å¼€å‘å®Œæ’ä»¶åï¼Œè¯·æ‰“åŒ…ï¼Œå°†æœ€åç”Ÿæˆçš„jaråŒ…å’Œæ’ä»¶ä¾èµ–çš„jaråŒ…æ‹·è´è¿›DBApiçš„<code>lib</code>ç›®å½•ä¸‹ï¼Œ å†é‡å¯DBApiæœåŠ¡ï¼ˆ<strong>å¦‚æœæ˜¯é›†ç¾¤æ¨¡å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦æ‹·è´jaråŒ…å¹¶é‡å¯é›†ç¾¤</strong>ï¼‰ï¼Œå°±å¯ä»¥ä½¿ç”¨æ’ä»¶äº†</li> <li>å¦‚æœæ’ä»¶ä¸­ä½¿ç”¨äº†å…¨å±€å‚æ•°ï¼Œè¿˜éœ€è¦åœ¨<code>conf/plugin.properties</code>æ–‡ä»¶æ·»åŠ ç›¸åº”é…ç½®å¹¶é‡å¯ç”Ÿæ•ˆï¼ˆ<strong>å¦‚æœæ˜¯é›†ç¾¤æ¨¡å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½éœ€è¦æ·»åŠ ç›¸åº”é…ç½®å¹¶é‡å¯ç”Ÿæ•ˆ</strong>ï¼‰</li></ul> <h2 id="_3-æ’ä»¶å¼€å‘å®Œæ•´æ¡ˆä¾‹"><a href="#_3-æ’ä»¶å¼€å‘å®Œæ•´æ¡ˆä¾‹" class="header-anchor">#</a> 3.æ’ä»¶å¼€å‘å®Œæ•´æ¡ˆä¾‹</h2> <p><a href="https://gitee.com/freakchicken/dbapi-plugin-demo" target="_blank" rel="noopener noreferrer">æ¡ˆä¾‹demo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5d88dc79.js" defer></script><script src="/assets/js/3.91e00d9f.js" defer></script><script src="/assets/js/11.f19c60e4.js" defer></script>
  </body>
</html>
